<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="鸿渚资源分享">
    <meta name="keywords" content="数字资源分享,漫画资源,编程工具,图像识别,学习资源,鸿渚">
    <meta name="author" content="鸿渚">
    <title>鸿渚资源库 | 数字资源聚合平台</title>
    
    <!-- 字体图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 主样式定义 -->
    <style>
        /* ==================== 设计系统变量定义 ==================== */
        :root {
            /* 主色调系 - 采用科技蓝与活力青搭配 */
            --color-primary: #4f46e5;          /* 主品牌色 - 科技靛蓝 */
            --color-secondary: #06b6d4;        /* 辅助色 - 活力青色 */
            --color-accent: #8b5cf6;          /* 强调色 - 创意紫色 */
            --color-success: #10b981;         /* 成功色 - 生态绿色 */
            --color-warning: #f59e0b;         /* 警告色 - 琥珀黄色 */
            --color-danger: #ef4444;          /* 危险色 - 警示红色 */
            
            /* 中性色调 - 支持深色/浅色模式切换 */
            --color-bg-primary: #ffffff;
            --color-bg-secondary: #f8fafc;
            --color-bg-tertiary: #f1f5f9;
            --color-text-primary: #1e293b;
            --color-text-secondary: #64748b;
            --color-text-tertiary: #94a3b8;
            --color-border-light: #e2e8f0;
            --color-border-medium: #cbd5e1;
            
            /* 卡片视觉设计 */
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            --card-shadow-hover: 0 20px 50px rgba(0, 0, 0, 0.15);
            --card-border-radius: 20px;
            
            /* 交互动效配置 */
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            /* 特殊组件配色 */
            --gradient-primary: linear-gradient(135deg, var(--color-primary), var(--color-accent));
            --gradient-success: linear-gradient(135deg, var(--color-success), #34d399);
            --gradient-warning: linear-gradient(135deg, var(--color-warning), #fbbf24);
            
            /* 终端仿真器配色 */
            --terminal-bg: #0f172a;
            --terminal-text: #e2e8f0;
            --terminal-green: #10b981;
            --terminal-blue: #3b82f6;
            --terminal-yellow: #f59e0b;
            --terminal-red: #ef4444;
        }

        /* 深色主题配色方案 - 增强对比度 */
        body.theme-dark {
            --color-bg-primary: #0a0a0f;
            --color-bg-secondary: #121826;
            --color-bg-tertiary: #1e2536;
            --color-text-primary: #f8fafc;
            --color-text-secondary: #cbd5e1;
            --color-text-tertiary: #94a3b8;
            --color-border-light: #2d3748;
            --color-border-medium: #4a5568;
            
            --card-bg: rgba(18, 24, 38, 0.95);
            --card-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
            --card-shadow-hover: 0 20px 50px rgba(0, 0, 0, 0.7);
            
            --terminal-bg: #020617;
        }

        /* ==================== 全局基础样式重置 ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', sans-serif;
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.5s ease, color 0.5s ease;
        }

        /* 允许特定内容区域文本选择 */
        .selectable-text,
        .document-content,
        .resource-description,
        input,
        textarea,
        pre,
        code {
            user-select: text !important;
        }

        /* ==================== 布局容器系统 ==================== */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .section-padding {
            padding: 80px 0;
        }

        /* ==================== 动画效果定义 ==================== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes floatAnimation {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 20px rgba(79, 70, 229, 0.4);
            }
            50% {
                box-shadow: 0 0 30px rgba(79, 70, 229, 0.6);
            }
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* ==================== 顶部导航栏设计 ==================== */
        .site-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--color-border-light);
            transition: var(--transition-smooth);
        }

        body.theme-dark .site-header {
            background: rgba(10, 10, 15, 0.85);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 80px;
            gap: 24px;
        }

        /* 品牌标识设计 */
        .brand-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--color-text-primary);
            font-weight: 700;
            font-size: 1.5rem;
            transition: var(--transition-smooth);
        }

        .brand-logo:hover {
            transform: translateY(-2px);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-primary);
            border-radius: 12px;
            color: white;
            font-size: 1.2rem;
            animation: pulseGlow 2s infinite;
        }

        /* 智能搜索框设计 */
        .search-container {
            flex: 1;
            max-width: 600px;
            position: relative;
        }

        .search-wrapper {
            position: relative;
            background: var(--color-bg-secondary);
            border-radius: 50px;
            border: 2px solid transparent;
            transition: var(--transition-smooth);
        }

        .search-wrapper:focus-within {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1);
            transform: translateY(-2px);
        }

        .search-input {
            width: 100%;
            padding: 16px 24px 16px 52px;
            border: none;
            background: transparent;
            color: var(--color-text-primary);
            font-size: 1rem;
            outline: none;
        }

        .search-input::placeholder {
            color: var(--color-text-tertiary);
        }

        .search-icon {
            position: absolute;
            left: 24px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-tertiary);
        }

        .search-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-primary);
            border: none;
            color: white;
            cursor: pointer;
            transition: var(--transition-smooth);
        }

        .search-button:hover {
            transform: translateY(-50%) scale(1.1);
        }

        /* 用户控制面板 */
        .user-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .control-button {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--color-bg-secondary);
            border: none;
            color: var(--color-text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            position: relative;
        }

        .control-button:hover {
            background: var(--color-bg-tertiary);
            color: var(--color-primary);
            transform: translateY(-2px);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--color-danger);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }

        /* ==================== 内容分类导航 ==================== */
        .category-navigation {
            background: var(--color-bg-secondary);
            padding: 20px 0;
            position: sticky;
            top: 80px;
            z-index: 999;
            backdrop-filter: blur(10px);
        }

        .category-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
        }

        .category-scroller {
            flex: 1;
            overflow-x: auto;
            scrollbar-width: none;
            padding-bottom: 8px;
        }

        .category-scroller::-webkit-scrollbar {
            display: none;
        }

        .category-list {
            display: flex;
            gap: 12px;
            list-style: none;
        }

        .category-item {
            padding: 10px 24px;
            background: var(--color-bg-primary);
            border: 2px solid var(--color-border-light);
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--color-text-secondary);
            cursor: pointer;
            white-space: nowrap;
            transition: var(--transition-smooth);
        }

        .category-item:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
            transform: translateY(-2px);
        }

        .category-item.active {
            background: var(--gradient-primary);
            border-color: transparent;
            color: white;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
        }

        /* 视图控制工具 - 移除视图切换，只保留排序 */
        .view-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .sort-selector {
            padding: 10px 16px;
            background: var(--color-bg-primary);
            border: 2px solid var(--color-border-light);
            border-radius: 12px;
            color: var(--color-text-primary);
            font-size: 0.95rem;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }

        /* ==================== 数据统计面板 ==================== */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
            animation: fadeInUp 0.6s ease-out;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 32px;
            border-radius: var(--card-border-radius);
            box-shadow: var(--card-shadow);
            border: 1px solid var(--color-border-light);
            text-align: center;
            transition: var(--transition-smooth);
            backdrop-filter: blur(10px);
        }

        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--card-shadow-hover);
        }

        .stat-value {
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 12px;
            line-height: 1;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--color-text-secondary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ==================== 资源卡片网格系统 ==================== */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        /* 卡片通用样式 */
        .resource-card {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            overflow: hidden;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--color-border-light);
            transition: var(--transition-smooth);
            position: relative;
            animation: fadeInUp 0.5s ease-out forwards;
            opacity: 0;
            animation-delay: calc(var(--card-index) * 0.05s);
        }

        .resource-card:hover {
            transform: translateY(-12px);
            box-shadow: var(--card-shadow-hover);
            border-color: var(--color-primary);
        }

        /* 卡片类型标识 */
        .card-type-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 2;
        }

        .type-web {
            background: rgba(59, 130, 246, 0.15);
            color: var(--color-primary);
            border: 2px solid rgba(59, 130, 246, 0.3);
        }

        .type-file {
            background: rgba(16, 185, 129, 0.15);
            color: var(--color-success);
            border: 2px solid rgba(16, 185, 129, 0.3);
        }

        .type-software {
            background: rgba(139, 92, 246, 0.15);
            color: var(--color-accent);
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        /* 卡片徽章系统 */
        .card-badges {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 2;
        }

        .card-badge {
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            backdrop-filter: blur(10px);
        }

        .badge-hot {
            background: linear-gradient(135deg, #ef4444, #f97316);
            color: white;
        }

        .badge-new {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
        }

        .badge-recommended {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            color: white;
        }

        /* 卡片头图区域 */
        .card-header {
            height: 200px;
            position: relative;
            overflow: hidden;
        }

        .card-gradient {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.9;
        }

        .gradient-web {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
        }

        .gradient-file {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .gradient-software {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
        }

        .card-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: white;
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
            transition: var(--transition-smooth);
        }

        .resource-card:hover .card-icon {
            transform: translate(-50%, -50%) scale(1.1) rotate(5deg);
        }

        /* 卡片内容区域 */
        .card-content {
            padding: 32px;
            position: relative;
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--color-text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title-icon {
            color: var(--color-warning);
        }

        .card-description {
            color: var(--color-text-secondary);
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 24px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* 卡片元信息 */
        .card-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 24px;
            border-top: 1px solid var(--color-border-light);
            margin-top: 24px;
        }

        .card-category {
            padding: 8px 16px;
            background: var(--color-bg-secondary);
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-text-tertiary);
        }

        .card-actions {
            display: flex;
            gap: 8px;
        }

        .action-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--color-border-light);
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition-smooth);
            color: var(--color-text-tertiary);
        }

        .action-button:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .action-button.favorite.active {
            background: var(--color-danger);
            border-color: var(--color-danger);
            color: white;
        }

        .action-button.document {
            position: relative;
        }

        .action-button.preview {
            background: rgba(59, 130, 246, 0.1);
            border-color: rgba(59, 130, 246, 0.3);
            color: var(--color-primary);
        }

        .action-button.preview:hover {
            background: var(--color-primary);
            color: white;
        }

        .document-indicator {
            position: absolute;
            top: -2px;
            right: -2px;
            width: 8px;
            height: 8px;
            background: var(--color-success);
            border-radius: 50%;
        }

        /* 卡片主操作按钮 */
        .card-primary-action {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 28px;
            background: var(--gradient-primary);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.95rem;
            transition: var(--transition-smooth);
            margin-top: 20px;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
        }

        .card-primary-action:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(79, 70, 229, 0.4);
        }

        /* ==================== 移动端列表视图 ==================== */
        @media (max-width: 768px) {
            .resources-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .resource-card.mobile-list-view {
                display: flex;
                flex-direction: row;
                align-items: stretch;
                min-height: 180px;
            }
            
            .resource-card.mobile-list-view .card-header {
                width: 140px;
                height: 180px;
                flex-shrink: 0;
            }
            
            .resource-card.mobile-list-view .card-content {
                flex: 1;
                display: flex;
                flex-direction: column;
                padding: 20px;
                min-height: 180px;
            }
            
            .resource-card.mobile-list-view .card-description {
                -webkit-line-clamp: 2;
                margin-bottom: 16px;
                flex: 1;
            }
            
            .resource-card.mobile-list-view .card-meta {
                margin-top: auto;
                padding-top: 16px;
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }
            
            .resource-card.mobile-list-view .card-category {
                align-self: flex-start;
            }
            
            .resource-card.mobile-list-view .card-actions {
                justify-content: center;
            }
            
            .resource-card.mobile-list-view .card-primary-action {
                margin-top: 16px;
                width: 100%;
            }
            
            /* 调整卡片徽章位置适应移动端 */
            .resource-card.mobile-list-view .card-badges {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 4px;
            }
            
            .resource-card.mobile-list-view .card-badge {
                font-size: 0.7rem;
                padding: 4px 8px;
            }
        }

        /* ==================== 模态对话框系统 ==================== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-dialog {
            background: var(--card-bg);
            border-radius: var(--card-border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.4);
            transform: translateY(40px) scale(0.95);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 1px solid var(--color-border-light);
            backdrop-filter: blur(20px);
            animation: modalFadeIn 0.3s ease-out;
        }

        .modal-overlay.active .modal-dialog {
            transform: translateY(0) scale(1);
        }

        /* 模态框头部 */
        .modal-header {
            padding: 32px;
            background: var(--gradient-primary);
            color: white;
            position: relative;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .modal-close {
            position: absolute;
            top: 32px;
            right: 32px;
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-smooth);
            font-size: 1.2rem;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        /* 模态框内容区 */
        .modal-body {
            padding: 32px;
            overflow-y: auto;
            max-height: 60vh;
        }

        /* ==================== 资源详情模态框 ==================== */
        .resource-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-label {
            font-size: 0.9rem;
            color: var(--color-text-tertiary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .tag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        /* 详情操作按钮组 */
        .detail-actions {
            display: flex;
            gap: 16px;
            margin-top: 32px;
        }

        .detail-button {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            border: 2px solid transparent;
            font-size: 1rem;
        }

        .button-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .button-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(79, 70, 229, 0.4);
        }

        .button-secondary {
            background: transparent;
            color: var(--color-text-primary);
            border-color: var(--color-border-medium);
        }

        .button-secondary:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
            transform: translateY(-3px);
        }

        .button-danger {
            background: transparent;
            color: var(--color-danger);
            border-color: var(--color-danger);
        }

        .button-danger:hover {
            background: var(--color-danger);
            color: white;
            transform: translateY(-3px);
        }

        /* ==================== 文档查看器模态框 ==================== */
        .document-tabs {
            display: flex;
            background: var(--color-bg-secondary);
            border-bottom: 1px solid var(--color-border-light);
        }

        .document-tab {
            padding: 20px 32px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: var(--color-text-tertiary);
            transition: var(--transition-smooth);
            position: relative;
            font-weight: 600;
        }

        .document-tab:hover {
            color: var(--color-primary);
            background: rgba(79, 70, 229, 0.05);
        }

        .document-tab.active {
            color: var(--color-primary);
            background: var(--card-bg);
        }

        .document-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }

        .document-viewer {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
            background: var(--card-bg);
        }

        /* 文档内容排版 */
        .document-content {
            line-height: 1.8;
            color: var(--color-text-primary);
        }

        .document-content h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 32px 0 16px;
            color: var(--color-primary);
        }

        .document-content h3 {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 24px 0 12px;
            color: var(--color-secondary);
        }

        .document-content p {
            margin-bottom: 20px;
        }

        .document-content ul,
        .document-content ol {
            margin: 16px 0 24px 32px;
        }

        .document-content li {
            margin-bottom: 10px;
            position: relative;
        }

        .document-content li::before {
            content: '›';
            color: var(--color-primary);
            position: absolute;
            left: -20px;
        }

        .document-content pre {
            background: var(--terminal-bg);
            color: var(--terminal-text);
            padding: 24px;
            border-radius: 12px;
            overflow-x: auto;
            margin: 24px 0;
            font-family: 'Cascadia Code', 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            border: 1px solid var(--color-border-light);
        }

        .document-content code {
            background: var(--color-bg-tertiary);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Cascadia Code', 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            border: 1px solid var(--color-border-light);
        }

        /* ==================== 网站预览功能样式 ==================== */
        .website-preview-container {
            width: 100%;
            height: 500px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--color-border-light);
            background: var(--color-bg-primary);
            position: relative;
        }

        .website-preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .preview-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            z-index: 10;
        }

        .preview-loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid var(--color-border-light);
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .preview-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--color-bg-secondary);
            border-radius: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }

        .preview-url-display {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            background: var(--color-bg-primary);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            max-width: 500px;
            overflow: hidden;
            flex: 1;
            min-width: 200px;
        }

        .preview-url-text {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .preview-control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .preview-control-button {
            padding: 10px 16px;
            background: var(--color-bg-primary);
            border: 2px solid var(--color-border-light);
            border-radius: 8px;
            color: var(--color-text-primary);
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .preview-control-button:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ==================== 终端仿真器组件 ==================== */
        .terminal-emulator {
            background: var(--terminal-bg);
            border-radius: var(--card-border-radius);
            overflow: hidden;
            margin: 80px 0;
            border: 1px solid var(--color-border-light);
            box-shadow: var(--card-shadow);
            backdrop-filter: blur(10px);
        }

        .terminal-header {
            background: #1e293b;
            padding: 20px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--color-border-light);
        }

        .terminal-controls {
            display: flex;
            gap: 12px;
        }

        .control-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            transition: var(--transition-smooth);
        }

        .control-dot.close {
            background: #ef4444;
        }

        .control-dot.minimize {
            background: #f59e0b;
        }

        .control-dot.maximize {
            background: #10b981;
        }

        .control-dot:hover {
            transform: scale(1.2);
        }

        .terminal-title {
            font-family: 'Cascadia Code', monospace;
            color: var(--color-text-tertiary);
            font-size: 1rem;
            font-weight: 600;
        }

        .terminal-body {
            padding: 32px;
            font-family: 'Cascadia Code', 'JetBrains Mono', monospace;
            color: var(--terminal-text);
            line-height: 1.8;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
        }

        .terminal-line {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-start;
            gap: 16px;
            animation: fadeInUp 0.3s ease-out forwards;
            opacity: 0;
        }

        .terminal-prompt {
            color: var(--terminal-green);
            font-weight: bold;
            flex-shrink: 0;
        }

        .terminal-command {
            color: var(--terminal-blue);
            flex-shrink: 0;
            font-weight: 600;
        }

        .terminal-output {
            color: var(--terminal-text);
            flex: 1;
        }

        .terminal-output.success {
            color: var(--terminal-green);
        }

        .terminal-output.error {
            color: var(--terminal-red);
        }

        .terminal-output.warning {
            color: var(--terminal-yellow);
        }

        .terminal-output.info {
            color: var(--terminal-blue);
        }

        .cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background: var(--terminal-green);
            margin-left: 5px;
            vertical-align: middle;
            animation: blink 1s infinite;
        }

        /* ==================== 网站页脚设计 ==================== */
        .site-footer {
            background: var(--color-bg-secondary);
            padding: 80px 0 40px;
            margin-top: 80px;
            border-top: 1px solid var(--color-border-light);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 60px;
            margin-bottom: 60px;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 24px;
            color: var(--color-text-primary);
            position: relative;
            padding-bottom: 16px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        .footer-description {
            color: var(--color-text-secondary);
            line-height: 1.7;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 16px;
        }

        .footer-link {
            color: var(--color-text-secondary);
            text-decoration: none;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .footer-link:hover {
            color: var(--color-primary);
            transform: translateX(8px);
        }

        .footer-copyright {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid var(--color-border-light);
            color: var(--color-text-tertiary);
            font-size: 0.95rem;
        }

        /* ==================== 辅助功能组件 ==================== */
        .scroll-to-top {
            position: fixed;
            bottom: 32px;
            right: 32px;
            width: 56px;
            height: 56px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-smooth);
            z-index: 1000;
            box-shadow: 0 8px 24px rgba(79, 70, 229, 0.3);
            font-size: 1.2rem;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
            animation: floatAnimation 3s ease-in-out infinite;
        }

        .scroll-to-top:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(79, 70, 229, 0.4);
        }

        /* 通知提示组件 */
        .notification-toast {
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--terminal-bg);
            color: var(--terminal-text);
            border-radius: 12px;
            padding: 0;
            z-index: 1001;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 500px;
            width: 90%;
            border: 1px solid var(--color-border-light);
            overflow: hidden;
        }

        .notification-toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast-header {
            background: #1e293b;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--color-border-light);
        }

        .toast-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
        }

        .toast-close {
            background: transparent;
            border: none;
            color: var(--color-text-tertiary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition-smooth);
        }

        .toast-close:hover {
            color: white;
            transform: rotate(90deg);
        }

        .toast-body {
            padding: 20px;
            line-height: 1.6;
        }

        /* 空状态提示 */
        .empty-state {
            text-align: center;
            padding: 80px 32px;
            color: var(--color-text-tertiary);
        }

        .empty-state-icon {
            font-size: 4rem;
            color: var(--color-border-light);
            margin-bottom: 24px;
        }

        .empty-state-title {
            font-size: 1.8rem;
            margin-bottom: 16px;
            color: var(--color-text-secondary);
            font-weight: 700;
        }

        .empty-state-description {
            font-size: 1.1rem;
            max-width: 500px;
            margin: 0 auto;
        }

        /* ==================== 分页导航组件 ==================== */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 60px;
        }

        .page-button {
            min-width: 48px;
            height: 48px;
            padding: 0 16px;
            border: 2px solid var(--color-border-light);
            background: var(--card-bg);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition-smooth);
            color: var(--color-text-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-button:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
            transform: translateY(-2px);
        }

        .page-button.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.3);
        }

        .page-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ==================== 响应式设计适配 ==================== */
        @media (max-width: 1024px) {
            .container {
                padding: 0 20px;
            }
            
            .resources-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 24px;
            }
            
            .card-header {
                height: 180px;
            }
        }

        @media (max-width: 768px) {
            .section-padding {
                padding: 60px 0;
            }
            
            .header-content {
                flex-wrap: wrap;
                height: auto;
                padding: 20px 0;
                gap: 16px;
            }
            
            .search-container {
                order: 3;
                width: 100%;
                max-width: none;
            }
            
            .category-container {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }
            
            .category-scroller {
                width: 100%;
            }
            
            .view-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .modal-dialog {
                width: 95%;
                height: 85vh;
            }
            
            .resource-info-grid {
                grid-template-columns: 1fr;
            }
            
            .detail-actions {
                flex-direction: column;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .website-preview-container {
                height: 300px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 16px;
            }
            
            .section-padding {
                padding: 48px 0;
            }
            
            .stat-card {
                padding: 24px;
            }
            
            .stat-value {
                font-size: 2.5rem;
            }
            
            .card-content {
                padding: 24px;
            }
            
            .modal-header,
            .modal-body {
                padding: 24px;
            }
            
            .document-tab {
                padding: 16px 24px;
                font-size: 0.95rem;
            }
            
            .terminal-body {
                padding: 24px;
            }
            
            .notification-toast {
                width: calc(100% - 32px);
            }
            
            .website-preview-container {
                height: 250px;
            }
        }

        /* ==================== 工具类辅助样式 ==================== */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .text-gradient {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .hidden {
            display: none !important;
        }

        /* ==================== 自定义滚动条样式 ==================== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-bg-secondary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-border-medium);
            border-radius: 5px;
            border: 2px solid var(--color-bg-secondary);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary);
        }

        /* 深色主题滚动条优化 */
        body.theme-dark ::-webkit-scrollbar-track {
            background: var(--color-bg-tertiary);
        }

        body.theme-dark ::-webkit-scrollbar-thumb {
            background: var(--color-border-light);
        }

        body.theme-dark ::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary);
        }
        
        /* 预览错误状态样式 */
        .preview-error-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 40px;
            text-align: center;
            background: var(--color-bg-secondary);
            border-radius: 12px;
        }

        .preview-error-icon {
            font-size: 4rem;
            color: var(--color-danger);
            margin-bottom: 20px;
        }

        .preview-error-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--color-text-primary);
        }

        .preview-error-message {
            color: var(--color-text-secondary);
            margin-bottom: 24px;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <!-- 页面加载过渡动画 -->
    <div class="page-loader" id="page-loader">
        <div class="loading-animation"></div>
    </div>
    
    <!-- 主站点头部区域 -->
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <!-- 品牌标识 -->
                <a href="/" class="brand-logo">
                    <div class="logo-icon">
                        <i class="fas fa-cube"></i>
                    </div>
                    <span>鸿渚资源库</span>
                </a>
                
                <!-- 智能搜索系统 -->
                <div class="search-container">
                    <div class="search-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="search-input" placeholder="探索数字资源宝藏..." aria-label="搜索资源">
                        <button class="search-button" id="search-button" aria-label="执行搜索">
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                
                <!-- 用户交互控制面板 -->
                <div class="user-controls">
                    <button class="control-button" id="theme-toggle" aria-label="切换主题模式">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="control-button" id="favorites-toggle" aria-label="查看收藏内容">
                        <i class="fas fa-heart"></i>
                        <span class="notification-badge" id="favorites-count">0</span>
                    </button>
                    <button class="control-button" id="updates-toggle" aria-label="查看系统更新">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- 资源分类导航系统 -->
    <nav class="category-navigation">
        <div class="container">
            <div class="category-container">
                <!-- 分类快速筛选 -->
                <div class="category-scroller">
                    <ul class="category-list" id="category-list">
                        <li class="category-item active" data-category="all">全部资源</li>
                        <li class="category-item" data-category="漫画">漫画资源</li>
                        <li class="category-item" data-category="程序">软件资源</li>
                        <li class="category-item" data-category="识图">图像识别</li>
                        <li class="category-item" data-category="创作">创意内容</li>
                        <li class="category-item" data-category="资源">资源分享</li>
                        <li class="category-item" data-category="工具">实用工具</li>
                    </ul>
                </div>
                
                <!-- 视图与排序控制 - 移除了视图切换，只保留排序 -->
                <div class="view-controls">
                    <select class="sort-selector" id="sort-selector" aria-label="排序方式选择">
                        <option value="default">智能推荐</option>
                        <option value="name">名称排序</option>
                        <option value="category">分类排序</option>
                        <option value="date">最近更新</option>
                    </select>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- 页面主内容区域 -->
    <main>
        <div class="container section-padding">
            <!-- 数据统计概览面板 -->
            <div class="stats-panel">
                <div class="stat-card">
                    <div class="stat-value" id="total-resources">0</div>
                    <div class="stat-label">资源总数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="active-collections">0</div>
                    <div class="stat-label">收藏内容</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="resource-categories">7</div>
                    <div class="stat-label">分类数量</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="latest-update">今日</div>
                    <div class="stat-label">最近更新</div>
                </div>
            </div>
            
            <!-- 资源展示网格系统 -->
            <div class="resources-grid" id="resources-container">
                <!-- 资源卡片将通过JavaScript动态生成 -->
            </div>
            
            <!-- 空状态提示组件 -->
            <div class="empty-state hidden" id="empty-state">
                <div class="empty-state-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3 class="empty-state-title">未找到匹配资源</h3>
                <p class="empty-state-description">尝试调整搜索关键词或选择其他分类标签</p>
            </div>
            
            <!-- 分页导航组件 -->
            <div class="pagination hidden" id="pagination-controls">
                <button class="page-button" id="prev-page" disabled>上一页</button>
                <div class="page-numbers" id="page-numbers"></div>
                <button class="page-button" id="next-page">下一页</button>
            </div>
            
            <!-- 系统终端仿真器 -->
            <div class="terminal-emulator">
                <div class="terminal-header">
                    <div class="terminal-controls">
                        <div class="control-dot close"></div>
                        <div class="control-dot minimize"></div>
                        <div class="control-dot maximize"></div>
                    </div>
                    <div class="terminal-title">系统终端 | 版本日志 v2.9.0</div>
                </div>
                <div class="terminal-body" id="terminal-output">
                    <!-- 终端输出内容通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </main>
    
    <!-- 网站页脚区域 -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <!-- 关于我们区块 -->
                <div class="footer-section">
                    <h3>关于平台</h3>
                    <p class="footer-description">
                        鸿渚资源库致力于聚合高质量的数字资源，通过精心筛选和分类，
                        为用户提供便捷的资源发现体验。我们关注技术创新与内容品质。
                    </p>
                </div>
                
                <!-- 快速链接区块 -->
                <div class="footer-section">
                    <h3>快速导航</h3>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link" id="documentation-link"><i class="fas fa-book"></i>使用指南</a></li>
                        <li><a href="#" class="footer-link" id="changelog-link"><i class="fas fa-history"></i>更新记录</a></li>
                        <li><a href="#" class="footer-link" id="contribute-link"><i class="fas fa-code-branch"></i>贡献指南</a></li>
                        <li><a href="#" class="footer-link" id="feedback-link"><i class="fas fa-comment-alt"></i>反馈建议</a></li>
                    </ul>
                </div>
                
                <!-- 技术支持区块 -->
                <div class="footer-section">
                    <h3>技术支持</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:contact@hongzhu.dev" class="footer-link"><i class="fas fa-envelope"></i>邮件联系</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-question-circle"></i>常见问题</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-shield-alt"></i>隐私政策</a></li>
                        <li><a href="#" class="footer-link"><i class="fas fa-file-contract"></i>服务条款</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- 版权信息 -->
            <div class="footer-copyright">
                <p>&copy; 2025-2026 鸿渚资源库 | 本平台仅供学习交流使用 | 版本号: 2.9.0 | 最后更新: 2026-01-03</p>
            </div>
        </div>
    </footer>
    
    <!-- 返回顶部浮动按钮 -->
    <button class="scroll-to-top" id="scroll-to-top" aria-label="返回页面顶部">
        <i class="fas fa-chevron-up"></i>
    </button>
    
    <!-- 系统通知提示组件 -->
    <div class="notification-toast" id="notification-toast">
        <div class="toast-header">
            <div class="toast-title">
                <i class="fas fa-info-circle"></i>
                <span id="toast-title">系统提示</span>
            </div>
            <button class="toast-close" id="toast-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="toast-body" id="toast-message">
            操作执行成功
        </div>
    </div>
    
    <!-- 资源详情查看模态框 -->
    <div class="modal-overlay" id="resource-detail-modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-info-circle"></i>
                    <span id="detail-title">资源详细信息</span>
                </div>
                <button class="modal-close" id="detail-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="detail-modal-body">
                <!-- 详情内容通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 文档查看器模态框 -->
    <div class="modal-overlay" id="document-viewer-modal">
        <div class="modal-dialog">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-book"></i>
                    <span id="document-title">使用文档</span>
                </div>
                <button class="modal-close" id="document-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 文档标签页导航 -->
                <div class="document-tabs">
                    <button class="document-tab active" data-tab="guide">使用指南</button>
                    <button class="document-tab" data-tab="faq">常见问题</button>
                </div>
                
                <!-- 文档内容展示区 -->
                <div class="document-viewer" id="document-content">
                    <!-- 文档内容通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 网站预览模态框 -->
    <div class="modal-overlay" id="website-preview-modal">
        <div class="modal-dialog" style="max-width: 90%; width: 1200px; height: 80vh;">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-eye"></i>
                    <span id="preview-modal-title">网站预览</span>
                </div>
                <button class="modal-close" id="preview-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="preview-modal-body">
                <!-- 预览内容通过JavaScript动态生成 -->
            </div>
        </div>
    </div>

    <!-- 内容保护提示模态框 -->
    <div class="modal-overlay" id="protection-notice-modal">
        <div class="modal-dialog" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-shield-alt"></i>
                    <span>内容保护提示</span>
                </div>
            </div>
            <div class="modal-body">
                <div style="text-align: center; padding: 32px;">
                    <i class="fas fa-lock" style="font-size: 3rem; color: var(--color-warning); margin-bottom: 24px;"></i>
                    <h3 style="font-size: 1.5rem; margin-bottom: 16px; color: var(--color-text-primary);">
                        资源保护声明
                    </h3>
                    <p style="color: var(--color-text-secondary); line-height: 1.7; margin-bottom: 32px;">
                        本网站内容受知识产权保护，禁止未经授权的复制、传播或商业使用。
                        如需引用相关内容，请通过正规渠道联系管理员获取授权。
                    </p>
                    <button class="detail-button button-primary" id="protection-confirm">
                        <i class="fas fa-check"></i>
                        我已理解并同意
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 应用主脚本 -->
    <script>
        /* =================================================== */
        /* 鸿渚资源库 - 主应用程序脚本 */
        /* 版本: 2.9.0 | 最后更新: 2026-01-03 */
        /* =================================================== */

        // ==================== 应用配置常量 ====================
        const APP_CONFIG = {
            // 分页显示设置
            ITEMS_PER_PAGE: 12,
            
            // 默认视图设置
            DEFAULT_VIEW: 'grid',
            DEFAULT_CATEGORY: 'all',
            
            // 本地存储键名
            STORAGE_KEYS: {
                FAVORITES: 'hongzhu_favorites',
                VIEW_MODE: 'hongzhu_view_mode',
                COLOR_THEME: 'hongzhu_color_theme',
                USER_SETTINGS: 'hongzhu_user_settings'
            },
            
            // 动画延迟配置
            ANIMATION_DELAYS: {
                CARD_STAGGER: 0.05,           // 卡片交错显示延迟（秒）
                NOTIFICATION_DURATION: 3000,  // 通知显示时长（毫秒）
                PAGE_TRANSITION: 300          // 页面过渡时间（毫秒）
            },
            
            // 数据缓存设置
            CACHE_DURATION: 5 * 60 * 1000,   // 5分钟缓存（毫秒）
            
            // 网站预览设置
            PREVIEW_TIMEOUT: 15000           // 预览加载超时时间（毫秒）
        };

        // ==================== 应用状态管理 ====================
        const APP_STATE = {
            // 当前页面状态
            currentPage: 1,                  // 当前页码
            currentCategory: APP_CONFIG.DEFAULT_CATEGORY, // 当前选中的分类
            currentView: APP_CONFIG.DEFAULT_VIEW,        // 当前视图模式
            
            // 搜索与过滤状态
            searchQuery: '',                 // 当前搜索关键词
            sortOrder: 'default',            // 当前排序方式
            
            // 用户数据状态
            favoriteResources: new Set(),    // 用户收藏的资源ID集合
            userPreferences: {},             // 用户偏好设置
            
            // 数据状态
            filteredResources: [],           // 过滤后的资源列表
            totalPages: 1,                   // 总页数
            
            // 模态框状态
            activeModal: null,               // 当前活动的模态框ID
            currentResource: null,           // 当前查看的资源对象
            currentDocument: null,           // 当前查看的文档对象
            currentPreviewUrl: null          // 当前预览的网站URL
        };

        // ==================== 数据资源库 ====================
        const RESOURCE_LIBRARY = {
            // 所有可用资源数据
            items: [
                {
                    id: 1,
                    name: "nhentai漫画平台",
                    description: "国际知名的数字漫画资源库，收录海量高品质漫画作品，提供多语言支持和完善的分类标签系统，用户可通过详细筛选快速定位感兴趣的内容。",
                    category: "漫画",
                    resourceType: "web",
                    targetUrl: "https://nhentai.net/",
                    iconClass: "fas fa-book",
                    tags: ["热门推荐", "最新上架"],
                    addedDate: "2025-10-11",
                    metadata: {
                        language: "多语言",
                        updateFrequency: "每日更新",
                        accessibility: "全球访问"
                    }
                },
                {
                    id: 2,
                    name: "ShotaLove漫画社区",
                    description: "专注于特定漫画题材的优质社区平台，以友善的社区氛围和及时的更新著称，特别适合喜爱轻松恋爱题材的读者群体。",
                    category: "漫画",
                    resourceType: "web",
                    targetUrl: "https://shotalove.fun/",
                    iconClass: "fas fa-heart",
                    tags: ["社区推荐", "优质内容"],
                    documentationUrl: "https://shotalove.fun/about/",
                    addedDate: "2025-10-11",
                    metadata: {
                        communitySize: "活跃社区",
                        contentQuality: "高品质",
                        userExperience: "友好界面"
                    }
                },
                {
                    id: 3,
                    name: "Chin2漫画平台",
                    description: "高质量漫画翻译与阅读平台，以精致的排版和准确的翻译著称，提供舒适的阅读体验。",
                    category: "漫画",
                    resourceType: "web",
                    targetUrl: "https://www.chin2.net/",
                    iconClass: "fas fa-book-open",
                    tags: ["推荐资源"],
                    documentationUrl: "https://www.chin2.net/Team",
                    addedDate: "2025-10-11"
                },
                {
                    id: 4,
                    name: "彩e漫画阅读器",
                    description: "Ehviewer彩色版本，功能强大的漫画阅读客户端，支持多种格式和丰富的自定义选项。",
                    category: "程序",
                    resourceType: "software",
                    targetUrl: "https://github.com/Ehviewer-Overhauled/Ehviewer/releases/",
                    iconClass: "fas fa-paint-brush",
                    tags: ["热门推荐", "必备工具"],
                    documentationUrl: "https://github.com/Ehviewer-Overhauled/Ehviewer/blob/1.8.x.x/docs/README/zh-cn.md",
                    addedDate: "2025-10-11"
                },
                {
                    id: 5,
                    name: "绿e漫画阅读器",
                    description: "Ehviewer绿色优化版本，体积小巧运行流畅，适合低配置设备使用。",
                    category: "程序",
                    resourceType: "software",
                    targetUrl: "https://github.com/xiaojieonly/Ehviewer_CN_SXJ/releases",
                    iconClass: "fas fa-leaf",
                    tags: ["轻量版"],
                    documentationUrl: "https://github.com/xiaojieonly/Ehviewer_CN_SXJ/blob/BiLi_PC_Gamer/README.md",
                    addedDate: "2025-10-11"
                },
                {
                    id: 6,
                    name: "白e漫画阅读器",
                    description: "Ehviewer白色简洁版本，专注于核心阅读功能，无广告启动快速。",
                    category: "程序",
                    resourceType: "software",
                    targetUrl: "https://gitee.com/nightmare97/EhViewer",
                    iconClass: "fas fa-snowflake",
                    tags: ["简洁版"],
                    documentationUrl: "https://gitee.com/nightmare97/EhViewer/blob/test/README.md",
                    addedDate: "2025-10-11"
                },
                {
                    id: 10,
                    name: "谷歌图片搜索",
                    description: "全球最强大的图片搜索引擎，支持以图搜图功能，可以识别图片内容并找到相似图片或图片来源。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://www.google.com/imghp",
                    iconClass: "fab fa-google",
                    tags: ["热门推荐", "必备工具"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 11,
                    name: "Yandex图片搜索",
                    description: "俄罗斯领先的搜索引擎，识图功能强大，特别擅长识别动漫和二次元图片。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://yandex.com/images/",
                    iconClass: "fas fa-search",
                    tags: ["推荐资源"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 12,
                    name: "Trace动漫识别",
                    description: "专业的动漫截图识别工具，可以通过截图查找动画名称、集数和具体时间点。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://trace.moe/",
                    iconClass: "fas fa-film",
                    tags: ["动漫专用"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 13,
                    name: "SauceNAO图片溯源",
                    description: "Pixiv图片搜索专家，拥有庞大的数据库，可以精准识别P站作品和作者信息。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://saucenao.com/",
                    iconClass: "fas fa-images",
                    tags: ["推荐资源", "Pixiv专用"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 14,
                    name: "搜图机器人",
                    description: "专注于本子识图的机器人工具，支持Telegram和Discord平台，使用方便快捷。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://soutubot.moe/",
                    iconClass: "fas fa-robot",
                    tags: ["机器人工具"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 15,
                    name: "ASCII2D详细搜索",
                    description: "日本二次元图片详细搜索网站，拥有强大的筛选功能和庞大的图库数据库。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://ascii2d.net/",
                    iconClass: "fas fa-search-plus",
                    tags: ["二次元专用"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 16,
                    name: "IQDB多图库搜索",
                    description: "支持多个动漫图库同时搜索的工具，可以提高查找效率和成功率。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "http://www.iqdb.org/",
                    iconClass: "fas fa-database",
                    tags: ["多图库支持"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 17,
                    name: "TinEye反向搜索",
                    description: "专业的反向图片搜索引擎，支持多种图片格式，可以查找图片在互联网上的使用情况。",
                    category: "识图",
                    resourceType: "web",
                    targetUrl: "https://tineye.com/",
                    iconClass: "fas fa-eye",
                    tags: ["反向搜索"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 18,
                    name: "仓鼠xixi",
                    description: "AI绘画作品分享。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/neGKc6G",
                    iconClass: "fas fa-palette",
                    tags: ["最新上架", "AI绘画", "正太"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 19,
                    name: "鸿渚",
                    description: "高质量的地理教学视频课程分享，提供系统的地理知识学习资源。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/0HsCFFT",
                    iconClass: "fas fa-globe-asia",
                    tags: ["推荐资源", "地理视频课"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 20,
                    name: "图片混淆工具",
                    description: "在线图片加密解密工具，支持多种加密算法，保护图片隐私安全。",
                    category: "工具",
                    resourceType: "web",
                    targetUrl: "https://tool.hadsky.com/enimg",
                    iconClass: "fas fa-unlock-alt",
                    tags: ["隐私保护"],
                    addedDate: "2025-10-11"
                },
                {
                    id: 21,
                    name: "集合体Aa",
                    description: "AI绘画作品分享。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/ve4uYzU",
                    iconClass: "fas fa-palette",
                    tags: ["最新上架", "AI绘画", "正太", "虚拟主播"],
                    addedDate: "2025-11-11"
                },
                {
                    id: 22,
                    name: "风炎小正太",
                    description: "AI绘画作品分享。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/i7xD9ot",
                    iconClass: "fas fa-palette",
                    tags: ["最新上架", "AI绘画", "正太"],
                    addedDate: "2025-11-11"
                },
                {
                    id: 23,
                    name: "拟杰AI",
                    description: "AI绘画作品分享。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/BCA8dg1",
                    iconClass: "fas fa-unlock-alt",
                    tags: ["最新上架", "AI绘画", "正太"],
                    addedDate: "2025-11-11"
                },
                {
                    id: 24,
                    name: "杰惹杰OWO",
                    description: "摄像作品分享。",
                    category: "创作",
                    resourceType: "web",
                    targetUrl: "https://b23.tv/Ung9NvJ",
                    iconClass: "fas fa-palette",
                    tags: ["最新上架", "小男孩", "男娘"],
                    addedDate: "2025-11-11"
                },
                {
                    id: 26,
                    name: "趣味心理实验室",
                    description: "有趣的心理测试合集，包含多种专业的心理学测试工具。",
                    category: "工具",
                    resourceType: "web",
                    targetUrl: "https://quiz.charlinserver.online/",
                    iconClass: "fas fa-brain",
                    tags: ["最新上架", "心理测试"],
                    addedDate: "2025-12-10"
                },
                {
                    id: 27,
                    name: "小男孩冒险成长",
                    description: "自制的网页小游戏，有趣的成长冒险体验，适合休闲娱乐。",
                    category: "工具",
                    resourceType: "web",
                    targetUrl: "https://watchfleeting.github.io/starsea-game/",
                    iconClass: "fas fa-gamepad",
                    tags: ["推荐资源", "最新上架", "网页游戏"],
                    addedDate: "2025-12-10"
                },
                {
                    id: 28,
                    name: "心理测试合集",
                    description: "有趣的心理测试合集，包含多种专业的心理学测试工具。",
                    category: "工具",
                    resourceType: "web",
                    targetUrl: "https://5ics.xyz/index.html/",
                    iconClass: "fas fa-brain",
                    tags: ["最新上架", "心理测试"],
                    addedDate: "2026-01-03"
                },
                {
                    id: 29,
                    name: "梦 2 记",
                    description: "网页小游戏，适合休闲娱乐。",
                    category: "工具",
                    resourceType: "web",
                    targetUrl: "https://ynoproject.net/2kki/",
                    iconClass: "fas fa-gamepad",
                    tags: ["推荐资源", "最新上架", "网页游戏"],
                    addedDate: "2026-01-03"
                }
            ],

            // 系统更新日志
            changelog: [
                {
                    date: "2026-01-03",
                    version: "v2.9.0",
                    changeType: "design",
                    description: "全面重构用户界面设计，引入现代化设计语言与交互动效"
                },
                {
                    date: "2025-12-12",
                    version: "v2.8.0",
                    changeType: "improvement",
                    description: "优化响应式布局，增强移动端用户体验与交互流畅度"
                },
                {
                    date: "2025-12-10",
                    version: "v2.7.0",
                    changeType: "feature",
                    description: "新增资源类型分类系统，支持网页、文件、软件三种资源类型"
                },
                {
                    date: "2025-12-09",
                    version: "v2.6.0",
                    changeType: "feature",
                    description: "集成文档查看器功能，支持在线浏览资源相关技术文档"
                },
                {
                    date: "2025-11-25",
                    version: "v2.5.0",
                    changeType: "feature",
                    description: "引入终端仿真器组件，以交互式界面展示系统更新日志"
                },
                {
                    date: "2025-11-20",
                    version: "v2.4.0",
                    changeType: "security",
                    description: "增强内容保护机制，添加智能防复制与访问控制功能"
                },
                {
                    date: "2025-11-15",
                    version: "v2.3.0",
                    changeType: "feature",
                    description: "实现本地收藏功能，支持跨会话保存用户偏好设置"
                },
                {
                    date: "2025-11-10",
                    version: "v2.2.0",
                    changeType: "performance",
                    description: "优化分页加载性能，提升大数据集下的浏览流畅度"
                },
                {
                    date: "2025-11-05",
                    version: "v2.1.0",
                    changeType: "design",
                    description: "采用现代化设计语言重构界面，改善视觉层次与交互反馈"
                },
                {
                    date: "2025-10-30",
                    version: "v1.5.0",
                    changeType: "feature",
                    description: "引入智能搜索系统，支持多维度分类筛选与排序功能"
                },
                {
                    date: "2025-10-25",
                    version: "v1.4.0",
                    changeType: "improvement",
                    description: "全面适配移动端设备，优化触屏交互体验与响应式布局"
                },
                {
                    date: "2025-10-20",
                    version: "v1.3.0",
                    changeType: "feature",
                    description: "添加数据统计面板，实时展示平台资源分布与使用情况"
                },
                {
                    date: "2025-10-15",
                    version: "v1.2.0",
                    changeType: "feature",
                    description: "实现网格与列表视图切换，提供个性化的内容浏览方式"
                },
                {
                    date: "2025-10-10",
                    version: "v1.1.0",
                    changeType: "feature",
                    description: "集成深色主题模式，支持用户自定义界面色彩方案"
                },
                {
                    date: "2025-10-05",
                    version: "v1.0.0",
                    changeType: "release",
                    description: "鸿渚资源库正式版发布，提供基础资源管理与展示功能"
                }
            ],

            // 文档内容库
            documentation: {
                guide: {
                    title: "平台使用指南",
                    content: `
                        <h2>欢迎使用鸿渚资源库</h2>
                        <p>本指南将帮助您快速掌握平台核心功能，高效发现与利用数字资源。</p>
                        
                        <h3>1. 资源分类体系</h3>
                        <p>平台采用三级分类系统：</p>
                        <ul>
                            <li><strong>一级分类</strong>：按内容领域划分，包括漫画、程序、识图等</li>
                            <li><strong>二级类型</strong>：按资源形式分类，如网页、文件、软件</li>
                            <li><strong>三级标签</strong>：描述资源特性，如热门、最新、推荐</li>
                        </ul>
                        
                        <h3>2. 智能搜索系统</h3>
                        <p>支持多种搜索方式：</p>
                        <ul>
                            <li><strong>关键词搜索</strong>：在标题、描述、标签中模糊匹配</li>
                            <li><strong>分类筛选</strong>：通过导航栏快速切换内容领域</li>
                            <li><strong>排序选项</strong>：按名称、分类、更新时间智能排序</li>
                        </ul>
                        
                        <h3>3. 交互操作指南</h3>
                        <p>资源卡片支持以下交互：</p>
                        <ul>
                            <li><strong>单击</strong>：查看资源详细信息面板</li>
                            <li><strong>双击</strong>：快速在新标签页打开资源链接</li>
                            <li><strong>收藏</strong>：点击心形图标保存到个人收藏</li>
                            <li><strong>分享</strong>：通过分享功能推荐给其他用户</li>
                            <li><strong>预览</strong>：点击预览按钮在页面内查看网站内容</li>
                        </ul>
                        
                        <h3>4. 个性化设置</h3>
                        <p>平台记忆您的偏好：</p>
                        <ul>
                            <li><strong>主题模式</strong>：自动保存浅色/深色主题选择</li>
                            <li><strong>收藏列表</strong>：本地存储个人收藏的资源</li>
                        </ul>
                        
                        <h3>5. 终端仿真器</h3>
                        <p>独特的信息展示方式：</p>
                        <ul>
                            <li>查看系统版本与更新历史</li>
                            <li>监控平台运行状态</li>
                            <li>获取技术更新通知</li>
                        </ul>
                        
                        <h3>6. 使用建议</h3>
                        <ul>
                            <li>使用收藏功能标记常用资源</li>
                            <li>定期查看更新日志获取新功能</li>
                            <li>通过反馈渠道提出改进建议</li>
                            <li>合理使用资源，尊重知识产权</li>
                        </ul>
                    `
                },
                
                faq: {
                    title: "常见问题解答",
                    content: `
                        <h2>常见问题解答</h2>
                        
                        <h3>1. 资源更新频率如何？</h3>
                        <p>平台每周进行一次资源库更新，特殊情况下会进行紧急更新。所有更新记录可在终端仿真器中查看。</p>
                        
                        <h3>2. 如何提交新资源建议？</h3>
                        <p>目前平台暂未开放用户提交功能。如有优质资源推荐，可通过页脚的联系方式与我们沟通。</p>
                        
                        <h3>3. 收藏功能如何工作？</h3>
                        <p>收藏数据保存在您的浏览器本地存储中，仅限当前设备访问。清理浏览器数据会导致收藏丢失。</p>
                        
                        <h3>4. 网站支持哪些浏览器？</h3>
                        <p>平台已全面适配现代浏览器，包括 Chrome、Firefox、Safari、Edge 等。建议使用最新版本以获得最佳体验。</p>
                        
                        <h3>5. 移动端体验如何优化？</h3>
                        <p>我们针对移动设备进行了专门优化，包括触屏手势支持、响应式布局和性能优化。</p>
                        
                        <h3>6. 数据隐私如何保护？</h3>
                        <p>平台仅收集必要的匿名使用数据，所有用户数据均本地存储，不会上传到远程服务器。</p>
                        
                        <h3>7. 遇到技术问题怎么办？</h3>
                        <p>请通过以下方式获取技术支持：</p>
                        <ul>
                            <li>查看使用指南中的故障排除部分</li>
                            <li>通过反馈渠道提交具体问题</li>
                            <li>关注更新日志中的问题修复</li>
                        </ul>
                    `
                }
            }
        };

        // ==================== DOM元素引用管理 ====================
        const DOM_ELEMENTS = {
            // 页面结构元素
            pageLoader: document.getElementById('page-loader'),
            resourcesContainer: document.getElementById('resources-container'),
            emptyState: document.getElementById('empty-state'),
            
            // 导航与搜索
            searchInput: document.getElementById('search-input'),
            searchButton: document.getElementById('search-button'),
            categoryList: document.getElementById('category-list'),
            sortSelector: document.getElementById('sort-selector'),
            
            // 用户控制
            themeToggle: document.getElementById('theme-toggle'),
            favoritesToggle: document.getElementById('favorites-toggle'),
            favoritesCount: document.getElementById('favorites-count'),
            updatesToggle: document.getElementById('updates-toggle'),
            
            // 统计面板
            totalResources: document.getElementById('total-resources'),
            activeCollections: document.getElementById('active-collections'),
            
            // 分页控制
            paginationControls: document.getElementById('pagination-controls'),
            prevPageButton: document.getElementById('prev-page'),
            nextPageButton: document.getElementById('next-page'),
            pageNumbersContainer: document.getElementById('page-numbers'),
            
            // 终端仿真器
            terminalOutput: document.getElementById('terminal-output'),
            
            // 模态对话框
            resourceDetailModal: document.getElementById('resource-detail-modal'),
            documentViewerModal: document.getElementById('document-viewer-modal'),
            websitePreviewModal: document.getElementById('website-preview-modal'),
            protectionModal: document.getElementById('protection-notice-modal'),
            
            // 通知系统
            notificationToast: document.getElementById('notification-toast'),
            toastTitle: document.getElementById('toast-title'),
            toastMessage: document.getElementById('toast-message'),
            toastClose: document.getElementById('toast-close'),
            
            // 返回顶部
            scrollToTop: document.getElementById('scroll-to-top'),
            
            // 页脚链接
            documentationLink: document.getElementById('documentation-link'),
            changelogLink: document.getElementById('changelog-link'),
            
            // 模态框关闭按钮
            detailClose: document.getElementById('detail-close'),
            documentClose: document.getElementById('document-close'),
            previewClose: document.getElementById('preview-close'),
            protectionConfirm: document.getElementById('protection-confirm')
        };

        // ==================== 工具函数库 ====================
        const UTILS = {
            // 防抖函数优化性能
            debounce: (func, delay) => {
                let timeoutId;
                return (...args) => {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => func.apply(this, args), delay);
                };
            },

            // 生成资源徽章HTML
            generateBadgesHTML: (tags) => {
                if (!tags || tags.length === 0) return '';
                
                // 徽章类型映射表
                const badgeMap = {
                    '热门推荐': { class: 'badge-hot', text: '热门' },
                    '最新上架': { class: 'badge-new', text: '最新' },
                    '社区推荐': { class: 'badge-recommended', text: '推荐' },
                    '优质内容': { class: 'badge-recommended', text: '优质' },
                    '推荐资源': { class: 'badge-recommended', text: '推荐' },
                    '必备工具': { class: 'badge-hot', text: '必备' },
                    '轻量版': { class: 'badge-new', text: '轻量' },
                    '简洁版': { class: 'badge-new', text: '简洁' },
                    '动漫专用': { class: 'badge-hot', text: '动漫' },
                    'Pixiv专用': { class: 'badge-hot', text: 'P站' },
                    '机器人工具': { class: 'badge-new', text: '机器人' },
                    '二次元专用': { class: 'badge-hot', text: '二次元' },
                    '多图库支持': { class: 'badge-hot', text: '多图库' },
                    '反向搜索': { class: 'badge-new', text: '反向' },
                    'AI绘画': { class: 'badge-hot', text: 'AI' },
                    '教育内容': { class: 'badge-recommended', text: '教育' },
                    '隐私保护': { class: 'badge-new', text: '隐私' },
                    'AI技术': { class: 'badge-hot', text: 'AI技术' },
                    '创意分享': { class: 'badge-recommended', text: '创意' },
                    '新手教程': { class: 'badge-new', text: '新手' },
                    '创意展示': { class: 'badge-recommended', text: '创意' },
                    '心理测试': { class: 'badge-new', text: '心理' },
                    '网页游戏': { class: 'badge-hot', text: '游戏' }
                };
                
                // 生成徽章HTML
                return tags.map(tag => {
                    const badge = badgeMap[tag];
                    return badge ? 
                        `<div class="card-badge ${badge.class}">${badge.text}</div>` : 
                        '';
                }).join('');
            },

            // 显示系统通知
            showNotification: (title, message, type = 'info') => {
                DOM_ELEMENTS.toastTitle.textContent = title;
                DOM_ELEMENTS.toastMessage.textContent = message;
                
                // 根据通知类型设置图标
                const icon = DOM_ELEMENTS.notificationToast.querySelector('.toast-title i');
                if (icon) {
                    switch(type) {
                        case 'success':
                            icon.className = 'fas fa-check-circle';
                            break;
                        case 'error':
                            icon.className = 'fas fa-exclamation-circle';
                            break;
                        case 'warning':
                            icon.className = 'fas fa-exclamation-triangle';
                            break;
                        default:
                            icon.className = 'fas fa-info-circle';
                    }
                }
                
                // 显示通知
                DOM_ELEMENTS.notificationToast.classList.add('show');
                
                // 自动隐藏通知
                setTimeout(() => {
                    DOM_ELEMENTS.notificationToast.classList.remove('show');
                }, APP_CONFIG.ANIMATION_DELAYS.NOTIFICATION_DURATION);
            },

            // 更新收藏计数显示
            updateFavoritesCount: () => {
                const count = APP_STATE.favoriteResources.size;
                DOM_ELEMENTS.favoritesCount.textContent = count;
                DOM_ELEMENTS.activeCollections.textContent = count;
                // 根据收藏数量显示或隐藏徽章
                DOM_ELEMENTS.favoritesCount.style.display = count > 0 ? 'block' : 'none';
            },

            // 安全复制到剪贴板
            copyToClipboard: async (text) => {
                try {
                    await navigator.clipboard.writeText(text);
                    UTILS.showNotification('复制成功', '内容已复制到剪贴板', 'success');
                    return true;
                } catch (error) {
                    // 降级方案：使用传统复制方法
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    UTILS.showNotification('复制成功', '内容已复制到剪贴板', 'success');
                    return true;
                }
            },

            // 格式化日期显示
            formatDate: (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            },

            // 生成唯一ID
            generateId: () => {
                return Date.now().toString(36) + Math.random().toString(36).substr(2);
            },

            // 检查是否是移动设备
            isMobileDevice: () => {
                return window.innerWidth <= 768;
            },

            // 检查URL是否可在iframe中加载
            checkIframeCompatibility: (url) => {
                try {
                    const urlObj = new URL(url);
                    // 检查常见的不允许iframe的网站
                    const incompatibleDomains = [
                        'google.com',
                        'youtube.com',
                        'twitter.com',
                        'facebook.com',
                        'instagram.com'
                    ];
                    
                    // 返回网站是否兼容iframe
                    return !incompatibleDomains.some(domain => urlObj.hostname.includes(domain));
                } catch (error) {
                    return false;
                }
            }
        };

        // ==================== 资源管理模块 ====================
        const RESOURCE_MANAGER = {
            // 过滤当前显示的资源
            filterResources: () => {
                let filtered = [...RESOURCE_LIBRARY.items];

                // 分类筛选
                if (APP_STATE.currentCategory !== 'all') {
                    // 将中文分类映射到英文
                    const categoryMap = {
                        '漫画': '漫画',
                        '程序': '程序',
                        '识图': '识图',
                        '创作': '创作',
                        '学习': '学习',
                        '工具': '工具'
                    };
                    
                    const targetCategory = categoryMap[APP_STATE.currentCategory] || APP_STATE.currentCategory;
                    filtered = filtered.filter(resource => 
                        resource.category === targetCategory
                    );
                }

                // 关键词搜索
                if (APP_STATE.searchQuery) {
                    const query = APP_STATE.searchQuery.toLowerCase();
                    filtered = filtered.filter(resource => 
                        resource.name.toLowerCase().includes(query) ||
                        resource.description.toLowerCase().includes(query) ||
                        resource.category.toLowerCase().includes(query) ||
                        (resource.tags && resource.tags.some(tag => tag.toLowerCase().includes(query)))
                    );
                }

                // 排序处理
                filtered.sort((a, b) => {
                    switch (APP_STATE.sortOrder) {
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'category':
                            return a.category.localeCompare(b.category);
                        case 'date':
                            return new Date(b.addedDate) - new Date(a.addedDate);
                        default:
                            // 智能推荐：热门和最新的资源排前面
                            const aScore = (a.tags || []).includes('热门推荐') ? 100 : 
                                         (a.tags || []).includes('最新上架') ? 50 : 0;
                            const bScore = (b.tags || []).includes('热门推荐') ? 100 : 
                                         (b.tags || []).includes('最新上架') ? 50 : 0;
                            return bScore - aScore;
                    }
                });

                APP_STATE.filteredResources = filtered;
                APP_STATE.totalPages = Math.ceil(filtered.length / APP_CONFIG.ITEMS_PER_PAGE);
            },

            // 渲染资源卡片到页面
            renderResources: () => {
                const startIndex = (APP_STATE.currentPage - 1) * APP_CONFIG.ITEMS_PER_PAGE;
                const endIndex = startIndex + APP_CONFIG.ITEMS_PER_PAGE;
                const pageResources = APP_STATE.filteredResources.slice(startIndex, endIndex);

                // 清空当前容器
                DOM_ELEMENTS.resourcesContainer.innerHTML = '';

                // 检查是否有资源显示
                if (pageResources.length === 0) {
                    DOM_ELEMENTS.emptyState.classList.remove('hidden');
                    DOM_ELEMENTS.paginationControls.classList.add('hidden');
                    return;
                }

                // 隐藏空状态提示
                DOM_ELEMENTS.emptyState.classList.add('hidden');

                // 生成资源卡片
                pageResources.forEach((resource, index) => {
                    const card = RESOURCE_MANAGER.createResourceCard(resource, index);
                    DOM_ELEMENTS.resourcesContainer.appendChild(card);
                    
                    // 添加卡片事件监听
                    RESOURCE_MANAGER.bindCardEvents(card, resource);
                });

                // 更新分页控件
                RESOURCE_MANAGER.updatePagination();
            },

            // 创建单个资源卡片HTML
            createResourceCard: (resource, index) => {
                const isFavorite = APP_STATE.favoriteResources.has(resource.id);
                const hasDocumentation = !!resource.documentationUrl;
                
                // 确定资源类型样式
                const typeClass = resource.resourceType === 'web' ? 'type-web' :
                                 resource.resourceType === 'file' ? 'type-file' :
                                 resource.resourceType === 'software' ? 'type-software' : 'type-web';
                
                const typeText = resource.resourceType === 'web' ? '网页推荐' :
                                resource.resourceType === 'file' ? '文件分享' :
                                resource.resourceType === 'software' ? '软件工具' : '网页';
                
                const gradientClass = resource.resourceType === 'web' ? 'gradient-web' :
                                     resource.resourceType === 'file' ? 'gradient-file' :
                                     resource.resourceType === 'software' ? 'gradient-software' : 'gradient-web';

                // 生成卡片HTML
                const card = document.createElement('div');
                card.className = `resource-card`;
                card.style.setProperty('--card-index', index);
                card.dataset.resourceId = resource.id;
                
                const badgesHTML = UTILS.generateBadgesHTML(resource.tags || []);
                
                // 检测是否为移动设备，自动应用列表布局
                if (UTILS.isMobileDevice()) {
                    card.classList.add('mobile-list-view');
                }
                
                if (!UTILS.isMobileDevice()) {
                    // 桌面端：卡片模式
                    card.innerHTML = `
                        <div class="card-header">
                            <div class="card-gradient ${gradientClass}"></div>
                            <div class="card-badges">
                                ${badgesHTML}
                            </div>
                            <div class="card-type-indicator ${typeClass}">${typeText}</div>
                            <i class="${resource.iconClass} card-icon"></i>
                        </div>
                        <div class="card-content">
                            <h3 class="card-title">
                                <i class="fas fa-star card-title-icon"></i>
                                ${resource.name}
                            </h3>
                            <p class="card-description selectable-text">
                                ${resource.description}
                            </p>
                            <div class="card-meta">
                                <span class="card-category">${resource.category}</span>
                                <div class="card-actions">
                                    <button class="action-button preview" 
                                            aria-label="预览网站">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    ${hasDocumentation ? `
                                    <button class="action-button document" 
                                            aria-label="查看文档">
                                        <i class="fas fa-book"></i>
                                        <span class="document-indicator"></span>
                                    </button>
                                    ` : ''}
                                    <button class="action-button favorite ${isFavorite ? 'active' : ''}" 
                                            aria-label="${isFavorite ? '取消收藏' : '添加到收藏'}">
                                        <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                                    </button>
                                    <button class="action-button share" 
                                            aria-label="分享资源">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <a href="${resource.targetUrl}" 
                               class="card-primary-action" 
                               target="_blank" 
                               rel="noopener noreferrer">
                                <i class="fas fa-external-link-alt"></i>
                                访问资源
                            </a>
                        </div>
                    `;
                } else {
                    // 移动端：列表模式
                    card.innerHTML = `
                        <div class="card-header">
                            <div class="card-gradient ${gradientClass}"></div>
                            <i class="${resource.iconClass} card-icon"></i>
                        </div>
                        <div class="card-content">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                                <h3 class="card-title">
                                    <i class="fas fa-star card-title-icon"></i>
                                    ${resource.name}
                                </h3>
                                <div style="display: flex; gap: 8px;">
                                    ${badgesHTML}
                                    <div class="card-type-indicator ${typeClass}">${typeText}</div>
                                </div>
                            </div>
                            <p class="card-description selectable-text">
                                ${resource.description}
                            </p>
                            <div class="card-meta">
                                <div style="display: flex; align-items: center; gap: 16px;">
                                    <span class="card-category">${resource.category}</span>
                                    <div class="card-actions">
                                        <button class="action-button preview" 
                                                aria-label="预览网站">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        ${hasDocumentation ? `
                                        <button class="action-button document" 
                                                aria-label="查看文档">
                                            <i class="fas fa-book"></i>
                                            <span class="document-indicator"></span>
                                        </button>
                                        ` : ''}
                                        <button class="action-button favorite ${isFavorite ? 'active' : ''}" 
                                                aria-label="${isFavorite ? '取消收藏' : '添加到收藏'}">
                                            <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                                        </button>
                                        <button class="action-button share" 
                                                aria-label="分享资源">
                                            <i class="fas fa-share-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <a href="${resource.targetUrl}" 
                                   class="card-primary-action" 
                                   target="_blank" 
                                   rel="noopener noreferrer">
                                    <i class="fas fa-external-link-alt"></i>
                                    立即访问
                                </a>
                            </div>
                        </div>
                    `;
                }

                return card;
            },

            // 绑定卡片交互事件
            bindCardEvents: (card, resource) => {
                // 卡片点击事件
                let clickTimer;
                let clickCount = 0;
                
                card.addEventListener('click', function(e) {
                    // 防止按钮点击触发卡片点击
                    if (e.target.closest('.action-button') || e.target.closest('.card-primary-action')) {
                        return;
                    }
                    
                    clickCount++;
                    
                    if (clickCount === 1) {
                        clickTimer = setTimeout(() => {
                            // 单击打开详情
                            APP_CONTROLLER.openResourceDetail(resource.id);
                            clickCount = 0;
                        }, 300);
                    } else if (clickCount === 2) {
                        clearTimeout(clickTimer);
                        // 双击快速访问
                        window.open(resource.targetUrl, '_blank');
                        APP_CONTROLLER.trackResourceVisit(resource.id);
                        clickCount = 0;
                        UTILS.showNotification('快速访问', `已在新标签页打开: ${resource.name}`, 'success');
                    }
                });
                
                // 绑定按钮事件
                const favoriteBtn = card.querySelector('.action-button.favorite');
                const shareBtn = card.querySelector('.action-button.share');
                const docBtn = card.querySelector('.action-button.document');
                const previewBtn = card.querySelector('.action-button.preview');
                const visitBtn = card.querySelector('.card-primary-action');
                
                if (favoriteBtn) {
                    favoriteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        APP_CONTROLLER.toggleFavorite(resource.id);
                    });
                }
                
                if (shareBtn) {
                    shareBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        APP_CONTROLLER.shareResource(resource.id);
                    });
                }
                
                if (docBtn && resource.documentationUrl) {
                    docBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        APP_CONTROLLER.openDocumentation(resource.id);
                    });
                }
                
                if (previewBtn) {
                    previewBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        // 通用化预览：所有有有效URL的资源都支持预览
                        if (resource.targetUrl && resource.targetUrl.startsWith('http')) {
                            APP_CONTROLLER.openWebsitePreview(resource.id);
                        } else {
                            UTILS.showNotification('预览不可用', '该资源没有可预览的网址', 'warning');
                        }
                    });
                }
                
                if (visitBtn) {
                    visitBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        APP_CONTROLLER.trackResourceVisit(resource.id);
                    });
                }
            },

            // 更新分页控件
            updatePagination: () => {
                if (APP_STATE.totalPages <= 1) {
                    DOM_ELEMENTS.paginationControls.classList.add('hidden');
                    return;
                }

                DOM_ELEMENTS.paginationControls.classList.remove('hidden');
                
                // 更新按钮状态
                DOM_ELEMENTS.prevPageButton.disabled = APP_STATE.currentPage === 1;
                DOM_ELEMENTS.nextPageButton.disabled = APP_STATE.currentPage === APP_STATE.totalPages;

                // 生成页码按钮
                let pageHTML = '';
                const maxVisiblePages = 5;
                let startPage = Math.max(1, APP_STATE.currentPage - 2);
                let endPage = Math.min(APP_STATE.totalPages, startPage + maxVisiblePages - 1);

                // 调整起始页码确保显示完整
                if (endPage - startPage + 1 < maxVisiblePages) {
                    startPage = Math.max(1, endPage - maxVisiblePages + 1);
                }

                for (let i = startPage; i <= endPage; i++) {
                    pageHTML += `
                        <button class="page-button ${i === APP_STATE.currentPage ? 'active' : ''}" 
                                onclick="APP_CONTROLLER.goToPage(${i})">
                            ${i}
                        </button>
                    `;
                }

                DOM_ELEMENTS.pageNumbersContainer.innerHTML = pageHTML;
            },

            // 过滤并重新渲染资源
            filterAndRender: () => {
                RESOURCE_MANAGER.filterResources();
                RESOURCE_MANAGER.renderResources();
                RESOURCE_MANAGER.updateStatistics();
            },

            // 更新统计信息
            updateStatistics: () => {
                DOM_ELEMENTS.totalResources.textContent = RESOURCE_LIBRARY.items.length;
            }
        };

        // ==================== 用户界面控制模块 ====================
        const UI_CONTROLLER = {
            // 初始化用户界面
            initialize: () => {
                UI_CONTROLLER.loadUserPreferences();
                UI_CONTROLLER.renderTerminalLogs();
                UI_CONTROLLER.setupEventListeners();
                UI_CONTROLLER.setupContentProtection();
                RESOURCE_MANAGER.filterAndRender();
            },

            // 加载用户偏好设置
            loadUserPreferences: () => {
                // 加载主题设置
                const savedTheme = localStorage.getItem(APP_CONFIG.STORAGE_KEYS.COLOR_THEME);
                if (savedTheme === 'dark') {
                    document.body.classList.add('theme-dark');
                    UI_CONTROLLER.updateThemeIcon('dark');
                }

                // 加载收藏数据
                const savedFavorites = localStorage.getItem(APP_CONFIG.STORAGE_KEYS.FAVORITES);
                if (savedFavorites) {
                    try {
                        const favoritesArray = JSON.parse(savedFavorites);
                        APP_STATE.favoriteResources = new Set(favoritesArray);
                        UTILS.updateFavoritesCount();
                    } catch (error) {
                        console.warn('加载收藏数据失败，使用默认设置');
                        APP_STATE.favoriteResources = new Set();
                    }
                }

                // 加载其他用户设置
                const savedSettings = localStorage.getItem(APP_CONFIG.STORAGE_KEYS.USER_SETTINGS);
                if (savedSettings) {
                    try {
                        APP_STATE.userPreferences = JSON.parse(savedSettings);
                    } catch (error) {
                        APP_STATE.userPreferences = {};
                    }
                }
            },

            // 渲染终端更新日志
            renderTerminalLogs: () => {
                let terminalHTML = '';
                
                // 终端欢迎信息
                terminalHTML += `
                    <div class="terminal-line" style="animation-delay: 0.1s">
                        <span class="terminal-prompt">$</span>
                        <span class="terminal-command">welcome.sh</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.2s">
                        <span class="terminal-output">欢迎使用鸿渚资源库管理系统</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.3s">
                        <span class="terminal-output">系统版本: <span class="terminal-output info">v2.8.0</span></span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.4s">
                        <span class="terminal-output">资源总数: <span class="terminal-output info">${RESOURCE_LIBRARY.items.length}</span></span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.5s">
                        <span class="terminal-output">最近更新: <span class="terminal-output info">${UTILS.formatDate('2025-12-12')}</span></span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.6s">
                        <span class="terminal-output">系统状态: <span class="terminal-output success">● 运行正常</span></span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.7s">
                        <span class="terminal-prompt">$</span>
                        <span class="terminal-command">check-updates.sh</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.8s">
                        <span class="terminal-output">检查系统更新...</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 0.9s">
                        <span class="terminal-output success">✓ 系统已更新至最新版本</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 1.0s">
                        <span class="terminal-prompt">$</span>
                        <span class="terminal-command">view-changelog.sh</span>
                    </div>
                    <div class="terminal-line" style="animation-delay: 1.1s">
                        <span class="terminal-output">显示更新历史:</span>
                    </div>
                `;
                
                // 更新日志条目
                RESOURCE_LIBRARY.changelog.forEach((log, index) => {
                    let typeClass = '';
                    let typeIcon = '';
                    
                    // 根据更新类型设置样式和图标
                    switch(log.changeType) {
                        case 'feature':
                            typeClass = 'info';
                            typeIcon = '[新功能]';
                            break;
                        case 'improvement':
                            typeClass = 'success';
                            typeIcon = '[优化]';
                            break;
                        case 'security':
                            typeClass = 'warning';
                            typeIcon = '[安全]';
                            break;
                        case 'design':
                            typeClass = 'info';
                            typeIcon = '[设计]';
                            break;
                        case 'performance':
                            typeClass = 'success';
                            typeIcon = '[性能]';
                            break;
                        case 'release':
                            typeClass = 'error';
                            typeIcon = '[发布]';
                            break;
                        default:
                            typeClass = '';
                            typeIcon = '[更新]';
                    }
                    
                    terminalHTML += `
                        <div class="terminal-line" style="animation-delay: ${1.2 + index * 0.1}s">
                            <span class="terminal-output ${typeClass}">${log.date} ${log.version} ${typeIcon} ${log.description}</span>
                        </div>
                    `;
                });
                
                // 终端光标
                terminalHTML += `
                    <div class="terminal-line" style="animation-delay: ${1.2 + RESOURCE_LIBRARY.changelog.length * 0.1}s">
                        <span class="terminal-prompt">$</span>
                        <span class="terminal-command"></span>
                        <span class="cursor"></span>
                    </div>
                `;
                
                DOM_ELEMENTS.terminalOutput.innerHTML = terminalHTML;
                
                // 自动滚动到底部
                setTimeout(() => {
                    DOM_ELEMENTS.terminalOutput.scrollTop = DOM_ELEMENTS.terminalOutput.scrollHeight;
                }, 100);
            },

            // 设置事件监听器
            setupEventListeners: () => {
                // 搜索功能
                DOM_ELEMENTS.searchInput.addEventListener('input', 
                    UTILS.debounce(UI_CONTROLLER.handleSearch, 300)
                );
                DOM_ELEMENTS.searchButton.addEventListener('click', UI_CONTROLLER.handleSearch);

                // 分类筛选
                DOM_ELEMENTS.categoryList.addEventListener('click', (e) => {
                    const categoryItem = e.target.closest('.category-item');
                    if (categoryItem) {
                        const category = categoryItem.dataset.category;
                        if (category !== APP_STATE.currentCategory) {
                            APP_STATE.currentCategory = category;
                            APP_STATE.currentPage = 1;
                            UI_CONTROLLER.updateActiveCategory(category);
                            RESOURCE_MANAGER.filterAndRender();
                        }
                    }
                });

                // 排序控制
                DOM_ELEMENTS.sortSelector.addEventListener('change', (e) => {
                    APP_STATE.sortOrder = e.target.value;
                    RESOURCE_MANAGER.filterAndRender();
                });

                // 分页控制
                DOM_ELEMENTS.prevPageButton.addEventListener('click', () => {
                    if (APP_STATE.currentPage > 1) {
                        APP_STATE.currentPage--;
                        RESOURCE_MANAGER.filterAndRender();
                        UI_CONTROLLER.scrollToResources();
                    }
                });

                DOM_ELEMENTS.nextPageButton.addEventListener('click', () => {
                    if (APP_STATE.currentPage < APP_STATE.totalPages) {
                        APP_STATE.currentPage++;
                        RESOURCE_MANAGER.filterAndRender();
                        UI_CONTROLLER.scrollToResources();
                    }
                });

                // 主题切换
                if (DOM_ELEMENTS.themeToggle) {
                    DOM_ELEMENTS.themeToggle.addEventListener('click', UI_CONTROLLER.toggleTheme);
                }

                // 收藏按钮
                if (DOM_ELEMENTS.favoritesToggle) {
                    DOM_ELEMENTS.favoritesToggle.addEventListener('click', () => {
                        UTILS.showNotification('收藏功能', '完整的收藏管理功能将在下一版本中提供', 'info');
                    });
                }

                // 更新日志按钮
                if (DOM_ELEMENTS.updatesToggle) {
                    DOM_ELEMENTS.updatesToggle.addEventListener('click', () => {
                        const terminalSection = document.querySelector('.terminal-emulator');
                        terminalSection.scrollIntoView({ behavior: 'smooth' });
                        UTILS.showNotification('系统日志', '已跳转到系统更新日志区域', 'success');
                    });
                }

                // 文档链接
                if (DOM_ELEMENTS.documentationLink) {
                    DOM_ELEMENTS.documentationLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        UI_CONTROLLER.openDocumentation();
                    });
                }

                // 更新日志链接
                if (DOM_ELEMENTS.changelogLink) {
                    DOM_ELEMENTS.changelogLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        const terminalSection = document.querySelector('.terminal-emulator');
                        terminalSection.scrollIntoView({ behavior: 'smooth' });
                    });
                }

                // 滚动到顶部按钮
                DOM_ELEMENTS.scrollToTop.addEventListener('click', () => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });

                // 滚动事件监听
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 300) {
                        DOM_ELEMENTS.scrollToTop.classList.add('visible');
                    } else {
                        DOM_ELEMENTS.scrollToTop.classList.remove('visible');
                    }
                });

                // 关闭通知
                DOM_ELEMENTS.toastClose.addEventListener('click', () => {
                    DOM_ELEMENTS.notificationToast.classList.remove('show');
                });

                // 模态框关闭按钮
                if (DOM_ELEMENTS.detailClose) {
                    DOM_ELEMENTS.detailClose.addEventListener('click', () => {
                        UI_CONTROLLER.closeModal('resource-detail-modal');
                    });
                }
                
                if (DOM_ELEMENTS.documentClose) {
                    DOM_ELEMENTS.documentClose.addEventListener('click', () => {
                        UI_CONTROLLER.closeModal('document-viewer-modal');
                    });
                }
                
                if (DOM_ELEMENTS.previewClose) {
                    DOM_ELEMENTS.previewClose.addEventListener('click', () => {
                        UI_CONTROLLER.closeModal('website-preview-modal');
                    });
                }
                
                if (DOM_ELEMENTS.protectionConfirm) {
                    DOM_ELEMENTS.protectionConfirm.addEventListener('click', () => {
                        UI_CONTROLLER.closeModal('protection-notice-modal');
                    });
                }

                // 模态框外部点击关闭
                document.addEventListener('click', (e) => {
                    const modals = ['resource-detail-modal', 'document-viewer-modal', 'website-preview-modal', 'protection-notice-modal'];
                    modals.forEach(modalId => {
                        const modal = document.getElementById(modalId);
                        if (modal && modal.classList.contains('active') && e.target === modal) {
                            UI_CONTROLLER.closeModal(modalId);
                        }
                    });
                });

                // 键盘快捷键支持
                document.addEventListener('keydown', (e) => {
                    // Ctrl/Cmd + F 聚焦搜索框
                    if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                        e.preventDefault();
                        DOM_ELEMENTS.searchInput.focus();
                    }
                    
                    // Escape 键关闭模态框或清空搜索
                    if (e.key === 'Escape') {
                        const activeModal = UI_CONTROLLER.getActiveModal();
                        if (activeModal) {
                            UI_CONTROLLER.closeModal(activeModal);
                        } else {
                            DOM_ELEMENTS.searchInput.value = '';
                            APP_STATE.searchQuery = '';
                            RESOURCE_MANAGER.filterAndRender();
                        }
                    }
                    
                    // Ctrl/Cmd + D 打开文档
                    if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                        e.preventDefault();
                        UI_CONTROLLER.openDocumentation();
                    }
                });

                // 页面加载完成
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        if (DOM_ELEMENTS.pageLoader) {
                            DOM_ELEMENTS.pageLoader.style.opacity = '0';
                            DOM_ELEMENTS.pageLoader.style.visibility = 'hidden';
                        }
                    }, 500);
                });
                
                // 文档标签页切换
                UI_CONTROLLER.setupDocumentTabs();
                
                // 窗口大小变化时重新渲染（适应移动端/桌面端切换）
                window.addEventListener('resize', UTILS.debounce(() => {
                    RESOURCE_MANAGER.renderResources();
                }, 250));
            },

            // 设置文档标签页切换
            setupDocumentTabs: () => {
                document.addEventListener('click', (e) => {
                    const tab = e.target.closest('.document-tab');
                    if (tab && tab.dataset.tab) {
                        UI_CONTROLLER.switchDocumentTab(tab.dataset.tab);
                    }
                });
            },

            // 内容保护设置
            setupContentProtection: () => {
                // 右键点击保护
                document.addEventListener('contextmenu', (e) => {
                    if (e.target.closest('.selectable-text') || 
                        e.target.tagName === 'INPUT' || 
                        e.target.tagName === 'TEXTAREA' ||
                        e.target.tagName === 'SELECT') {
                        return;
                    }
                    
                    e.preventDefault();
                    UI_CONTROLLER.showProtectionNotice();
                    return false;
                });
                
                // 复制保护
                document.addEventListener('copy', (e) => {
                    const selection = window.getSelection();
                    if (!selection.toString().trim() || 
                        selection.anchorNode.closest('.selectable-text') ||
                        selection.anchorNode.closest('input') ||
                        selection.anchorNode.closest('textarea') ||
                        selection.anchorNode.closest('pre') ||
                        selection.anchorNode.closest('code')) {
                        return;
                    }
                    
                    e.preventDefault();
                    UI_CONTROLLER.showProtectionNotice();
                    return false;
                });
                
                // 拖拽保护
                document.addEventListener('dragstart', (e) => {
                    if (!e.target.closest('.selectable-text')) {
                        e.preventDefault();
                        return false;
                    }
                });
            },

            // 显示保护提示
            showProtectionNotice: () => {
                UI_CONTROLLER.openModal('protection-notice-modal');
            },

            // 获取当前活动的模态框
            getActiveModal: () => {
                const modals = ['resource-detail-modal', 'document-viewer-modal', 'website-preview-modal', 'protection-notice-modal'];
                for (const modalId of modals) {
                    const modal = document.getElementById(modalId);
                    if (modal && modal.classList.contains('active')) {
                        return modalId;
                    }
                }
                return null;
            },

            // 搜索处理
            handleSearch: () => {
                APP_STATE.searchQuery = DOM_ELEMENTS.searchInput.value.trim().toLowerCase();
                APP_STATE.currentPage = 1;
                RESOURCE_MANAGER.filterAndRender();
            },

            // 更新活动分类状态
            updateActiveCategory: (category) => {
                document.querySelectorAll('.category-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.category === category);
                });
            },

            // 切换主题模式
            toggleTheme: () => {
                const isDark = document.body.classList.toggle('theme-dark');
                UI_CONTROLLER.updateThemeIcon(isDark ? 'dark' : 'light');
                localStorage.setItem(APP_CONFIG.STORAGE_KEYS.COLOR_THEME, isDark ? 'dark' : 'light');
                
                UTILS.showNotification(
                    '主题切换', 
                    `已切换到${isDark ? '深色' : '浅色'}主题`, 
                    'success'
                );
            },

            // 更新主题图标
            updateThemeIcon: (theme) => {
                const icon = DOM_ELEMENTS.themeToggle.querySelector('i');
                if (icon) {
                    icon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
                }
            },

            // 滚动到资源区域
            scrollToResources: () => {
                const resourcesSection = document.querySelector('.resources-grid');
                if (resourcesSection) {
                    resourcesSection.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            },

            // 打开模态框
            openModal: (modalId) => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    APP_STATE.activeModal = modalId;
                    
                    // 添加模态框动画类
                    const dialog = modal.querySelector('.modal-dialog');
                    if (dialog) {
                        dialog.style.animation = 'modalFadeIn 0.3s ease-out';
                    }
                }
            },

            // 关闭模态框
            closeModal: (modalId) => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                    APP_STATE.activeModal = null;
                    
                    // 如果是资源详情模态框，清空当前资源
                    if (modalId === 'resource-detail-modal') {
                        APP_STATE.currentResource = null;
                    }
                    
                    // 如果是网站预览模态框，清除iframe内容
                    if (modalId === 'website-preview-modal') {
                        const iframe = document.getElementById('website-preview-iframe');
                        if (iframe) {
                            iframe.src = 'about:blank';
                        }
                        APP_STATE.currentPreviewUrl = null;
                    }
                }
            },

            // 打开文档查看器
            openDocumentation: (resourceId = null) => {
                if (resourceId) {
                    const resource = RESOURCE_LIBRARY.items.find(r => r.id === resourceId);
                    if (resource && resource.documentationUrl) {
                        // 切换到预览标签页并加载资源文档
                        UI_CONTROLLER.switchDocumentTab('preview');
                        // 这里可以添加加载特定资源文档的逻辑
                    }
                } else {
                    // 打开通用文档
                    UI_CONTROLLER.switchDocumentTab('guide');
                }
                
                UI_CONTROLLER.openModal('document-viewer-modal');
            },

            // 切换文档标签页
            switchDocumentTab: (tabName) => {
                // 更新标签状态
                document.querySelectorAll('.document-tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                // 加载对应内容
                const contentArea = document.getElementById('document-content');
                if (contentArea) {
                    contentArea.innerHTML = `
                        <div class="document-content">
                            ${RESOURCE_LIBRARY.documentation[tabName]?.content || '内容加载中...'}
                        </div>
                    `;
                    
                    // 如果是预览标签页，设置事件监听
                    if (tabName === 'preview') {
                        setTimeout(() => UI_CONTROLLER.setupPreviewEvents(), 100);
                    }
                }
            },

            // 设置预览功能事件
            setupPreviewEvents: () => {
                const startPreview = document.getElementById('start-preview');
                const websiteSelector = document.getElementById('website-selector');
                const refreshPreviewBtn = document.getElementById('refresh-preview-btn');
                const openExternalBtn = document.getElementById('open-external-btn');
                
                if (startPreview && websiteSelector) {
                    startPreview.addEventListener('click', () => {
                        const selectedUrl = websiteSelector.value;
                        if (!selectedUrl) {
                            UTILS.showNotification('预览提示', '请先选择要预览的网站', 'warning');
                            return;
                        }
                        
                        UI_CONTROLLER.loadWebsitePreview(selectedUrl);
                    });
                }
                
                if (refreshPreviewBtn) {
                    refreshPreviewBtn.addEventListener('click', () => {
                        if (APP_STATE.currentPreviewUrl) {
                            UI_CONTROLLER.loadWebsitePreview(APP_STATE.currentPreviewUrl, true);
                        }
                    });
                }
                
                if (openExternalBtn) {
                    openExternalBtn.addEventListener('click', () => {
                        if (APP_STATE.currentPreviewUrl) {
                            window.open(APP_STATE.currentPreviewUrl, '_blank');
                            UTILS.showNotification('外部打开', '已在新的浏览器标签中打开网站', 'success');
                        }
                    });
                }
                
                // 监听iframe加载完成
                const websiteIframe = document.getElementById('website-iframe');
                if (websiteIframe) {
                    websiteIframe.addEventListener('load', () => {
                        const loadingElement = document.getElementById('preview-loading');
                        if (loadingElement) {
                            loadingElement.style.display = 'none';
                        }
                    });
                }
            },

            // 加载网站预览
            loadWebsitePreview: (url, isRefresh = false) => {
                APP_STATE.currentPreviewUrl = url;
                
                // 更新URL显示
                const urlDisplay = document.getElementById('current-preview-url');
                if (urlDisplay) {
                    urlDisplay.textContent = url;
                }
                
                // 显示加载状态
                const loadingElement = document.getElementById('preview-loading');
                if (loadingElement) {
                    loadingElement.style.display = 'flex';
                }
                
                // 设置iframe的src
                const websiteIframe = document.getElementById('website-iframe');
                if (websiteIframe) {
                    if (isRefresh) {
                        // 刷新时使用replace方法避免重新创建iframe
                        websiteIframe.contentWindow.location.replace(url);
                    } else {
                        websiteIframe.src = url;
                    }
                }
                
                if (!isRefresh) {
                    UTILS.showNotification('网站预览', '正在加载网站预览...', 'info');
                } else {
                    UTILS.showNotification('刷新预览', '正在刷新网站预览...', 'info');
                }
            },

            // 打开网站预览模态框 - 修复后的通用版本
            openWebsitePreviewModal: (resource) => {
                const previewTitle = document.getElementById('preview-modal-title');
                const previewBody = document.getElementById('preview-modal-body');
                
                if (previewTitle && previewBody) {
                    previewTitle.textContent = `预览: ${resource.name}`;
                    
                    previewBody.innerHTML = `
                        <div class="preview-controls">
                            <div class="preview-url-display">
                                <i class="fas fa-link"></i>
                                <span id="preview-modal-url">${resource.targetUrl}</span>
                            </div>
                            <div class="preview-control-buttons">
                                <button id="preview-modal-refresh" class="preview-control-button">
                                    <i class="fas fa-redo"></i> 刷新
                                </button>
                                <button id="preview-modal-open-external" class="preview-control-button">
                                    <i class="fas fa-external-link-alt"></i> 新标签打开
                                </button>
                                <button id="preview-modal-copy-url" class="preview-control-button">
                                    <i class="fas fa-copy"></i> 复制链接
                                </button>
                            </div>
                        </div>
                        
                        <div class="website-preview-container">
                            <div class="preview-loading" id="preview-modal-loading">
                                <div class="preview-loading-spinner"></div>
                                <p style="color: var(--color-text-secondary); margin-top: 10px;">正在加载网站预览...</p>
                            </div>
                            <div id="preview-error-message" style="display: none; text-align: center; padding: 40px; color: var(--color-danger);">
                                <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 16px;"></i>
                                <h3 style="margin-bottom: 12px;">无法加载网站预览</h3>
                                <p>由于浏览器安全策略限制，此网站无法在嵌入式框架中显示。</p>
                                <button id="preview-fallback-open" class="preview-control-button" style="margin-top: 20px;">
                                    <i class="fas fa-external-link-alt"></i> 在新标签页中打开
                                </button>
                            </div>
                            <iframe id="website-preview-iframe" 
                                    class="website-preview-frame" 
                                    sandbox="allow-same-origin allow-scripts allow-popups allow-forms allow-modals allow-downloads"
                                    referrerpolicy="no-referrer-when-downgrade"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                    loading="lazy"></iframe>
                        </div>
                        
                        <div style="margin-top: 20px; padding: 16px; background: var(--color-bg-secondary); border-radius: 8px; font-size: 0.9rem;">
                            <p><strong>提示：</strong>由于浏览器安全策略限制，某些网站可能无法在嵌入式框架中正常加载。如遇问题，请尝试在新标签页中打开。</p>
                            <p style="margin-top: 8px; color: var(--color-text-tertiary); font-size: 0.85rem;">
                                <i class="fas fa-info-circle"></i> 正在预览: ${resource.category} > ${resource.name}
                            </p>
                        </div>
                    `;
                    
                    // 绑定预览模态框事件
                    setTimeout(() => {
                        const refreshBtn = document.getElementById('preview-modal-refresh');
                        const openExternalBtn = document.getElementById('preview-modal-open-external');
                        const copyUrlBtn = document.getElementById('preview-modal-copy-url');
                        const fallbackOpenBtn = document.getElementById('preview-fallback-open');
                        const iframe = document.getElementById('website-preview-iframe');
                        const loadingElement = document.getElementById('preview-modal-loading');
                        const errorMessage = document.getElementById('preview-error-message');
                        
                        // 加载超时检测
                        let loadTimeout;
                        
                        const startLoading = () => {
                            if (loadingElement) loadingElement.style.display = 'flex';
                            if (errorMessage) errorMessage.style.display = 'none';
                            if (iframe) iframe.style.display = 'none';
                            
                            // 设置加载超时（15秒）
                            loadTimeout = setTimeout(() => {
                                showError('加载超时，网站可能限制嵌入式访问');
                            }, APP_CONFIG.PREVIEW_TIMEOUT);
                        };
                        
                        const stopLoading = () => {
                            clearTimeout(loadTimeout);
                            if (loadingElement) loadingElement.style.display = 'none';
                            if (iframe) iframe.style.display = 'block';
                        };
                        
                        const showError = (message) => {
                            clearTimeout(loadTimeout);
                            if (loadingElement) loadingElement.style.display = 'none';
                            if (iframe) iframe.style.display = 'none';
                            if (errorMessage) {
                                errorMessage.style.display = 'block';
                                if (message) {
                                    errorMessage.querySelector('p').textContent = message;
                                }
                            }
                        };
                        
                        // 开始加载
                        startLoading();
                        
                        // 设置iframe的src
                        if (iframe) {
                            iframe.src = resource.targetUrl;
                            
                            // 监听iframe加载完成
                            iframe.addEventListener('load', () => {
                                stopLoading();
                                UTILS.showNotification('预览加载完成', '网站预览已就绪', 'success');
                            });
                            
                            // 监听iframe加载错误
                            iframe.addEventListener('error', () => {
                                showError('加载失败，网站可能限制嵌入式访问');
                            });
                        }
                        
                        // 刷新按钮
                        if (refreshBtn) {
                            refreshBtn.addEventListener('click', () => {
                                if (resource.targetUrl) {
                                    startLoading();
                                    iframe.src = resource.targetUrl;
                                    UTILS.showNotification('刷新预览', '正在重新加载网站...', 'info');
                                }
                            });
                        }
                        
                        // 外部打开按钮
                        if (openExternalBtn) {
                            openExternalBtn.addEventListener('click', () => {
                                window.open(resource.targetUrl, '_blank');
                                UTILS.showNotification('外部打开', '已在新的浏览器标签中打开网站', 'success');
                            });
                        }
                        
                        // 复制URL按钮
                        if (copyUrlBtn) {
                            copyUrlBtn.addEventListener('click', async () => {
                                try {
                                    await navigator.clipboard.writeText(resource.targetUrl);
                                    UTILS.showNotification('复制成功', '链接已复制到剪贴板', 'success');
                                } catch (error) {
                                    // 降级方案
                                    const textArea = document.createElement('textarea');
                                    textArea.value = resource.targetUrl;
                                    document.body.appendChild(textArea);
                                    textArea.select();
                                    document.execCommand('copy');
                                    document.body.removeChild(textArea);
                                    UTILS.showNotification('复制成功', '链接已复制到剪贴板', 'success');
                                }
                            });
                        }
                        
                        // 降级打开按钮
                        if (fallbackOpenBtn) {
                            fallbackOpenBtn.addEventListener('click', () => {
                                window.open(resource.targetUrl, '_blank');
                                UTILS.showNotification('外部打开', '已在新的浏览器标签中打开网站', 'success');
                            });
                        }
                    }, 100);
                }
                
                UI_CONTROLLER.openModal('website-preview-modal');
            }
        };

        // ==================== 应用主控制器 ====================
        const APP_CONTROLLER = {
            // 初始化应用
            initialize: () => {
                UI_CONTROLLER.initialize();
            },

            // 切换收藏状态
            toggleFavorite: (resourceId) => {
                if (APP_STATE.favoriteResources.has(resourceId)) {
                    APP_STATE.favoriteResources.delete(resourceId);
                    UTILS.showNotification('取消收藏', '已从收藏列表中移除', 'warning');
                } else {
                    APP_STATE.favoriteResources.add(resourceId);
                    UTILS.showNotification('添加收藏', '已添加到个人收藏', 'success');
                }

                // 保存到本地存储
                localStorage.setItem(
                    APP_CONFIG.STORAGE_KEYS.FAVORITES,
                    JSON.stringify([...APP_STATE.favoriteResources])
                );
                
                // 更新界面
                UTILS.updateFavoritesCount();
                RESOURCE_MANAGER.filterAndRender();
                
                // 如果当前打开了该资源的详情模态框，更新按钮状态
                if (APP_STATE.currentResource && APP_STATE.currentResource.id === resourceId) {
                    APP_CONTROLLER.openResourceDetail(resourceId);
                }
            },

            // 分享资源
            shareResource: (resourceId) => {
                const resource = RESOURCE_LIBRARY.items.find(r => r.id === resourceId);
                if (!resource) return;

                // 使用 Web Share API 如果可用
                if (navigator.share) {
                    navigator.share({
                        title: resource.name,
                        text: resource.description,
                        url: resource.targetUrl
                    }).then(() => {
                        UTILS.showNotification('分享成功', '资源已成功分享', 'success');
                    }).catch(error => {
                        console.log('分享取消或出错:', error);
                    });
                } else {
                    // 备用方案：复制到剪贴板
                    const shareText = `${resource.name}\n${resource.description}\n${resource.targetUrl}`;
                    UTILS.copyToClipboard(shareText);
                }
            },

            // 跟踪资源访问
            trackResourceVisit: (resourceId) => {
                const resource = RESOURCE_LIBRARY.items.find(r => r.id === resourceId);
                if (resource) {
                    UTILS.showNotification('访问资源', `正在前往: ${resource.name}`, 'info');
                }
            },

            // 跳转到指定页面
            goToPage: (page) => {
                APP_STATE.currentPage = page;
                RESOURCE_MANAGER.filterAndRender();
                UI_CONTROLLER.scrollToResources();
            },

            // 打开资源详情
            openResourceDetail: (resourceId) => {
                const resource = RESOURCE_LIBRARY.items.find(r => r.id === resourceId);
                if (!resource) return;
                
                APP_STATE.currentResource = resource;
                
                // 设置详情内容
                const detailTitle = document.getElementById('detail-title');
                const detailBody = document.getElementById('detail-modal-body');
                
                if (detailTitle && detailBody) {
                    detailTitle.textContent = resource.name;
                    
                    const typeText = resource.resourceType === 'web' ? '网页推荐' :
                                    resource.resourceType === 'file' ? '文件分享' :
                                    resource.resourceType === 'software' ? '软件工具' : '网页';
                    
                    const isFavorite = APP_STATE.favoriteResources.has(resource.id);
                    
                    detailBody.innerHTML = `
                        <div style="text-align: center; margin-bottom: 32px;">
                            <i class="${resource.iconClass}" style="font-size: 4rem; color: var(--color-primary);"></i>
                        </div>
                        
                        <div style="background: var(--color-bg-secondary); padding: 24px; border-radius: 12px; margin-bottom: 32px;">
                            <p style="font-size: 1.1rem; line-height: 1.8; color: var(--color-text-primary);">
                                ${resource.description}
                            </p>
                        </div>
                        
                        <div class="resource-info-grid">
                            <div class="info-item">
                                <span class="info-label"><i class="fas fa-tag"></i> 资源分类</span>
                                <span class="info-value">${resource.category}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="fas fa-layer-group"></i> 资源类型</span>
                                <span class="info-value">${typeText}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="fas fa-calendar-alt"></i> 收录时间</span>
                                <span class="info-value">${UTILS.formatDate(resource.addedDate)}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label"><i class="fas fa-tags"></i> 内容标签</span>
                                <div class="tag-container">
                                    ${(resource.tags || []).map(tag => `
                                        <span style="padding: 6px 12px; background: var(--color-bg-tertiary); border-radius: 20px; font-size: 0.85rem; color: var(--color-text-secondary);">
                                            ${tag}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-actions">
                            <button class="detail-button button-primary" onclick="APP_CONTROLLER.openWebsitePreview(${resource.id})">
                                <i class="fas fa-eye"></i>
                                预览网站
                            </button>
                            <a href="${resource.targetUrl}" 
                               target="_blank" 
                               rel="noopener noreferrer"
                               class="detail-button button-secondary" onclick="APP_CONTROLLER.trackResourceVisit(${resource.id})">
                                <i class="fas fa-external-link-alt"></i>
                                访问资源网站
                            </a>
                            <button class="detail-button ${isFavorite ? 'button-danger' : 'button-secondary'}" onclick="APP_CONTROLLER.toggleFavorite(${resource.id})">
                                <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                                ${isFavorite ? '取消收藏' : '添加到收藏'}
                            </button>
                        </div>
                    `;
                }
                
                UI_CONTROLLER.openModal('resource-detail-modal');
            },

            // 打开文档
            openDocumentation: (resourceId = null) => {
                UI_CONTROLLER.openDocumentation(resourceId);
            },

            // 打开网站预览 - 修复后的通用版本
            openWebsitePreview: (resourceId) => {
                const resource = RESOURCE_LIBRARY.items.find(r => r.id === resourceId);
                if (!resource) {
                    UTILS.showNotification('预览失败', '找不到指定的资源', 'error');
                    return;
                }
                
                // 检查资源是否有有效的URL
                if (!resource.targetUrl || !resource.targetUrl.startsWith('http')) {
                    UTILS.showNotification('预览不可用', '该资源没有可预览的网址', 'warning');
                    // 如果没有预览地址，直接打开详情页
                    APP_CONTROLLER.openResourceDetail(resourceId);
                    return;
                }
                
                UI_CONTROLLER.openWebsitePreviewModal(resource);
            }
        };

        // ==================== 应用启动入口 ====================
        document.addEventListener('DOMContentLoaded', APP_CONTROLLER.initialize);
    </script>
</body>
</html>
